version: 1
type: pipeline-template

name: Java/Node multibranch pipeline
templateType: MULTIBRANCH
description: Test, Build and Deploy for Java/Node applications
parameters:
  - name: githubCredentialId
    displayName: GitHub Credential ID
    type: CREDENTIALS
  - name: repo
    displayName: GitHub Repo
    type: string
  - name: repoOwner
    displayName: GitHub Repo Owner
    type: string  
  - name: nexusCredentialId
    displayName: Nexus Credential ID
    type: CREDENTIALS
  - name: applicationName
    displayName: Application Name
    type: string
  - name: mvnSettingsFile
    displayName: File to be used for Maven
    type: string
multibranch:
  branchSource:
    github:
      repoOwner: ${repoOwner}
      repository: ${repo}
      credentialsId: ${githubCredentialId}
      markerFile: .build 